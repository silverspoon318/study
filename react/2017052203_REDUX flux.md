## Redux
페이스북에서 flux 아키텍쳐를 구현한 라이브러리.
컴포넌트끼리 data 교류 및 state 관리를 쉽고 효율적으로 할 수 있게 해주는 라이브러리.

## MVC
action >> controller >> model <<>> view (model과 view 서로 교류가능)
작은 어플리케이션에서는 쓸만한 아키텍쳐이다. model이 view를 건드리고 view가 model 건드리고 무한 반복된다.

페이스북에서 여러 채팅창이 있을 경우,
한곳에서만 변화가 일어나도 여러 컴포넌트에 반영이 되어야 하는 데 그 과정에서 꼬이기 시작하여 버그가 발생함.
자꾸 비슷한 오류가 발생해서 mvc 아키텍쳐를 버리고 flux를 적용함.

## Flux
일종의 idea. 추상적인 개념, 단방향 데이터 흐름(unidirectional data flow)
view에서 직접 store에 접근하지 않고 dispatcher로 action을 보낸다. dispatcher에서는 작업이 중첩되지 않도록 해준다.
action >> dispatcher >> store >> view >> dispatcher >> store >> view >> ...

[Flux로의 카툰안내서](http://bestalign.github.io/2015/10/06/cartoon-guide-to-flux/)

액션 생성자(the action creator) - 모든 변경사항과 사용자와의 상호작용이 거쳐가야 하는 액션의 생성을 담당
                               - 전보기사(무슨 메시지를 보낼지 알려주면 액션 생성자는 나머지 시스템이 이해할 수 있는 포맷으로 바꿔준다)
                               - 액션 생성자가 액션 메시지를 생성한 뒤에는 디스패쳐(dispatcher)로 넘겨준다.

디스패쳐(dispatcher) - 기본적으로 콜백(callback)이 등록되어있는 곳이다.
                    - 전화 교환대에서 교환원이 일하는 것과 같다.
                    - 디스패쳐는 액션을 보낼 필요가 있는 모든 스토어(store)를 가지고 있고, 액션 생성자로부터 액션이 넘어오면 여러 스토어에 액션을 보낸다.
                    - 동기적으로 실행.
                    - Flux의 디스패쳐는 다른 아키텍처들과는 조금 다른 점이 있다.
                    바로 액션 타입과는 관계없이 등록된 모든 스토어로 보내진다는 점이다.
                    이말인 즉슨, 스토어가 특정 액션만 구독(subscribe)하지 않고 모든 액션을 일단 받은 뒤 처리할지 말지를 결정한다는 뜻이다

스토어(store) - 스토어는 애플리케이션 내의 모든 상태와 그와 관련된 로직을 가지고 있다.
              - 스토어에는 설정자(setter)가 존재하지 않으므로, 상태 변경을 요청하기 위해서는 반드시 모든 정해진 절차를 따라야만 한다
              다시말해, 무조건 액션 생성자/디스패쳐 파이프라인을 거쳐서 액션을 보내야만 한다.

컨트롤러 뷰(the controller view)와 뷰(the view)
- 뷰는 상태를 상태를 가져오고 유저에게 보여주고 입력받을 화면을 렌더링하는 역할을 맡는다.

## 준비
1. 스토어는 디스패쳐에 액션이 들어오면 알려달라고 말해둔다.
2. 컨트롤러 뷰는 스토어에게 최신 상태를 묻는다.
3. 스토어가 컨트롤러 뷰에게 상태를 주면 렌더링하기 위해 모든 자식 뷰에게 상태를 넘겨준다.
4. 컨트롤러 뷰는 스토어에게 상태가 바뀔 때 알려달라고 다시 부탁한다.

## 데이터 흐름
1. 뷰는 액션 생성자에게 액션을 준비하라고 말한다.
2. 액션생성자는 액션을 포맷에 맞게 만들어서 디스패쳐에 넘겨준다.
3. 디스패쳐는 들어온 액션의 순서에 따라 알맞은 스토어로 보낸다.
   각 스토어는 모든 액션을 받게 되지만 필요한 액션만을 골라서 상태를 필요에 맞게 변경한다.
4. 상태변경이 완료되면 스토어는 자식을 구독(subscribe)하고 있는 컨트롤러 뷰에게 그 사실을 알린다.
5. 연락을 받은 컨트롤러 뷰들은 스토어에게 변경된 상태를 요청한다.
6. 스토어가 새로운 상태를 넘겨주면, 컨트롤러 뷰는 자신 아래의 모든 뷰에게 새로운 상태로 맞게 렌더링하라고 알린다.
